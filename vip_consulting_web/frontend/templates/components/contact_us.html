<div class="mt-10 sm:mt-0 pt-5 md:pt-8">
    <div class="text-center">
        <h2 class="text-3xl text-primary  font-semibold tracking-wide uppercase">Contact us</h2>
        <p class="mt-2 text-base leading-8 font-extrabold tracking-tight text-gray-900">Get in touch with us</p>
    </div>
    <div class="flex justify-center items-center">

        <div class="mt-5 md:mt-0 w-full md:w-10/12 lg:w-9/12 mx-auto py-5 sm:p-6">
            <form action="#" id="contact_form" x-data="contact_form" @submit.prevent="submit" method="POST">

                <div class="w-full grid grid-cols-8 gap-4 p-4 md:p=0">
                    <div class="col-span-8 md:col-span-4">
                        <label for="first-name" class="block text-sm font-medium text-gray-700">First name</label>
                        <input type="text" name="first-name" id="first-name" autocomplete="given-name"
                            class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                            :class="{'border-red-600':fields.firstname.isValid == false}"
                            x-model="fields.firstname.value" @blur="fields.firstname.validate(validationCallback)"
                            @input="fields.firstname.validate(validationCallback)">
                        <p class="text-red-500 text-xs italic py-2" x-show="fields.firstname.isValid == false">
                            <span x-text="fields.firstname.errorMsg"></span>
                        </p>
                    </div>

                    <div class="col-span-8 md:col-span-4">
                        <label for="last-name" class="block text-sm font-medium text-gray-700">Last name</label>
                        <input type="text" name="last-name" id="last-name" autocomplete="family-name"
                            class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                            :class="{'border-red-600':fields.lastname.isValid == false}" x-model="fields.lastname.value"
                            @blur="fields.lastname.validate(validationCallback)"
                            @input="fields.lastname.validate(validationCallback)">

                        <p class="text-red-500 text-xs italic py-2" x-show="fields.lastname.isValid == false">
                            <span x-text="fields.lastname.errorMsg"></span>
                        </p>
                    </div>

                    <div class="col-span-8 md:col-span-4">
                        <label for="first-name" class="block text-sm font-medium text-gray-700">Email
                        </label>
                        <input type="text" name="first-name" id="first-name" name="email"
                            class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                            :class="{'border-red-600':fields.email.isValid == false}" id="email"
                            x-model="fields.email.value" @blur="fields.email.validate(validationCallback)"
                            @input="fields.email.validate(validationCallback)">

                        <p class="text-red-500 text-xs italic py-2" x-show="fields.email.isValid == false">
                            <span x-text="fields.email.errorMsg"></span>
                        </p>
                    </div>

                    <div class="col-span-8 md:col-span-4">
                        <label for="last-name" class="block text-sm font-medium text-gray-700">Phone</label>
                        <input type="number" name="phone" id="phone"
                            class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                            :class="{'border-red-600':fields.phone.isValid == false}" x-model="fields.phone.value"
                            @blur="fields.phone.validate(validationCallback)"
                            @input="fields.phone.validate(validationCallback)">

                        <p class="text-red-500 text-xs italic py-2" x-show="fields.phone.isValid == false">
                            <span x-text="fields.phone.errorMsg"></span>
                        </p>
                    </div>

                    <div class="col-span-8 ">
                        <label for="about" class="block text-sm font-medium text-gray-700"> Message </label>
                        <div class="mt-1">
                            <textarea id="about" name="about" rows="3"
                                class="shadow-sm focus:ring-indigo-500 focus:border-indigo-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md"
                                placeholder="Write your message here"
                                :class="{'border-red-600':fields.message.isValid == false}"
                                x-model="fields.message.value" @blur="fields.message.validate(validationCallback)"
                                @input="fields.message.validate(validationCallback)">


                            </textarea>
                        </div>
                        <p class="mt-2 text-sm text-gray-500">Brief description for your profile. URLs are
                            hyperlinked.</p>
                        <p class="text-red-500 text-xs italic py-2" x-show="fields.message.isValid == false">
                            <span x-text="fields.message.errorMsg"></span>
                        </p>
                    </div>


                </div>
                <div class="px-4 py-3 bg-gray-50 text-right sm:px-6 flex justify-center">
                    <button type="submit"
                        class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Submit</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="hidden sm:block" aria-hidden="true">
    <div class="py-5">
        <div class="border-t border-gray-200"></div>
    </div>
</div>

<script>
    document.addEventListener('alpine:init', () => {
        Alpine.data('contact_form', () => ({
            fields: {
                firstname: {
                    value: '',
                    rules: ["required"],
                    isValid: null,
                    errorMsg: null,
                    validate(callback) {
                        let { isValid, errorMsg } = callback(this);
                        this.isValid = isValid;
                        this.errorMsg = errorMsg;
                    },
                },
                lastname: {
                    value: '',
                    rules: ["required"],
                    isValid: null,
                    errorMsg: null,
                    validate(callback) {
                        let { isValid, errorMsg } = callback(this);
                        this.isValid = isValid;
                        this.errorMsg = errorMsg;
                    },
                },
                email: {
                    value: '',
                    rules: ["required", "email"],
                    isValid: null,
                    errorMsg: null,
                    validate(callback) {
                        let { isValid, errorMsg } = callback(this);
                        this.isValid = isValid;
                        this.errorMsg = errorMsg;
                    },
                },
                phone: {
                    value: null,
                    rules: ["required", "integer"],
                    isValid: null,
                    errorMsg: null,
                    validate(callback) {
                        let { isValid, errorMsg } = callback(this);
                        this.isValid = isValid;
                        this.errorMsg = errorMsg;
                    },
                },
                message: {
                    value: '',
                    rules: ["required"],
                    isValid: null,
                    errorMsg: null,
                    validate(callback) {
                        let { isValid, errorMsg } = callback(this);
                        this.isValid = isValid;
                        this.errorMsg = errorMsg;
                    },
                },

            },
            isFormValid: true,
            validationCallback(field) {
                let { value, rules } = field;
                let isValid = Iodine.isValid(value, rules);
                let errorMsg = isValid
                    ? null
                    : Iodine.getErrorMessage(Iodine.is(value, rules));
                return { isValid, errorMsg };
            },
            submit() {
                this.isFormValid = !Object.values(this.fields).some(
                    (field) => !field.isValid
                );
                return this.isFormValid;
            }
        }))
    })
</script>